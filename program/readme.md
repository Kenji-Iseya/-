# ロボット動作用のプログラム

## 実行環境  
~~今回は、microSDカードにDebianを入れてプログラムを実行する予定。~~  
~~そのため、Windowsの場合は、Microsoft Store から WSLのOSとして~~  
~~Debian系の Ubunbu 18.04 をインストールして使うのが楽。~~  
  
~~下記 URL を参照して初期設定を済ませないと~~  
~~clang のインストールに**ものすごく時間がかかる**ため注意。~~  
~~http://www.aise.ics.saitama-u.ac.jp/~gotoh/HowToInstallUbuntu1804OnWSL.html~~

今回は、BeagleBone BlackのeMMCにDebianを書き込んだ状態で実行する。  
OSのバージョンは Debian 7.11(Wheezy)で、  
コンパイラは、C++11に完全対応した **g++** の **4.7** を利用する。 

## ビルド方法

1. 下記のコマンドで~~clang~~ **g++**をインストール  
```
sudo apt-get install g++ -y  
```  
※インストールされるのが、**4.7 以上のバージョン**であることを確認する。  
※Debian 7系 (Wheezy)では、デフォルトで **4.6 がインストールされる**ため注意。  
その場合は、「g++-4.7」をパッケージ名に指定してやれば良い。   

2. cd コマンドを使ってprogramディレクトリへ移動  

3. 下記のコマンドでビルド  
```
make  
```
4. 下記のコマンドで実行  
```
./start  
```

## モータドライバボードでのPWMの扱いについて  

| モータドライバ | P9_ピン番号:PWM | IN1:GPIO番号 | IN2:GPIO番号 |
| :------------: | :-------------: | :----------: | :----------: |
|      No.1      |      P9_14      |      61      |      60      |
|      No.2      |      P9_22      |      65      |      46      |

|  IN1  |  IN2  |    出力    |
| :---: | :---: | :--------: |
|   1   |   1   |  ブレーキ  |
|   0   |   1   | 逆転(正転) |
|   1   |   0   | 正転(逆転) |
|   0   |   0   |  ストップ  |


## RobotControllerクラスについて
下表のようにロボットが動くように配線すること  

| IN1 (Motor1) | IN2 (Motor1) | IN1 (Motor1) | IN2 (Motor1) | ロボットが動く方向 |
| :----------: | :----------: | :----------: | :----------: | :----------------: |
|      1       |      0       |      1       |      0       |  北 (正転・正転)   |
|      1       |      0       |      0       |      1       |  西 (正転・逆転)   |
|      0       |      1       |      1       |      0       |  東 (逆転・正転)   |
|      0       |      1       |      0       |      1       |  南 (逆転・逆転)   |

## RobotControllerの各種引数について
下記のように、関数を呼び出してオブジェクトを初期化すること  
(現在、このように配線されている)
```
オブジェクト名.initMotorGPIO(60, 61, 65, 46);
オブジェクト名.initMotorPWM(14, 22);
オブジェクト名.initSensor(27, 45, 47, 115);
```
